<div class="create-container page">
  <div class="component page__heading">
    <div class="flex-left views">
      <button
        class="btn-basic"
        [class.selected]="view == 'tests'"
        (click)="setView('tests')"
      >
        TESTS
      </button>
      <button
        class="btn-basic"
        [class.selected]="view == 'results'"
        (click)="setView('results')"
      >
        RESULTS
      </button>
    </div>
    <div class="flex-center">
      <div class="flex-center mcq-heading">VIEW RESULTS</div>

      <div>
        <button
          class="btn-basic"
          [disabled]="view == 'results'"
          (click)="displayResults('all')"
        >
          ALL
        </button>
        <button
          class="btn-basic"
          [disabled]="view == 'results'"
          (click)="displayResults('unmarked')"
        >
          UNMARKED
        </button>
        <button
          class="btn-basic"
          [disabled]="view == 'results'"
          (click)="displayResults('marked')"
        >
          MARKED
        </button>
      </div>
    </div>
  </div>
  <!-- code for tests view -->
  @if(view=='tests'){
  <div class="component flex-center">
    <table>
      <thead>
        <tr>
          <th>sn</th>
          <th>subject</th>
          <th>topic</th>
          <th>subtopic</th>
          <th>created</th>
          <th>score</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        @for (item of filteredExams; track $index) {
        <tr>
          <td>{{ $index + 1 }}</td>
          <td>{{ item.subjectID }}</td>
          <td>{{ item.topicID }}</td>
          <td>{{ item.subtopicID }}</td>
          <td>{{ getDate(item.createdAt ?? "") }}</td>
          <td>{{ calculateScore(item) }}</td>
          <td>
            <button class="btn-basic" (click)="toResult(item)">VIEW</button>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
  }
  <!-- code for mark view -->
  @if (view=='results') { @for (qn of exam.questions; track $index) {
  <mcq-res [qn]="qn" />
  } }
</div>
<!-- code for confirmation widget here -->
<!-- @if(confirmation){
<prompt-confirm [message]="'confirm to save'" (onConfirm)="save($event)" />
}  -->
@if(loading){
<prompt-confirm />
}
